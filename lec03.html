<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>lec03</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Лекция 3. Пропозициональное равенство и равенство по определению. Арифметика Пеано</h1>


<div class="paragraph"> </div>

В этой лекции кванторы и пропозициональные связки изображаются символами Unicode.

<div class="paragraph"> </div>

<a name="lab2"></a><h2 class="section">Пропозициональное равенство</h2>


<div class="paragraph"> </div>

Напоминание. Теория (множество замкнутых формул) называется теорией с
равенством, если она содержит универсальные замыкания следующих аксиом

<div class="paragraph"> </div>

<ul class="doclist">
<li> (E1) <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span></span>

</li>
<li> (E2) <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span></span>

</li>
<li> (E3) <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">z</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">z</span></span>

</li>
<li> (E4) <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> и аналогично для многоместных функциональных символов

</li>
<li> (E5) <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> и аналогично для многоместных предикатных символов

</li>
</ul>

<div class="paragraph"> </div>

Напоминание: <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">t</span>/<span class="id" title="var">x</span>]</span> обозначает результат подстановки терма <span class="inlinecode"><span class="id" title="var">t</span></span>
вместо свободных вхождений переменной <span class="inlinecode"><span class="id" title="var">x</span></span> в формулу <span class="inlinecode"><span class="id" title="var">A</span></span>.

<div class="paragraph"> </div>

<strong>Утверждение.</strong>
Пусть <span class="inlinecode"><span class="id" title="var">A</span></span> есть произвольная формула, <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">FV</span>(<span class="id" title="var">A</span>)</span>, <span class="inlinecode"><span class="id" title="var">s</span></span>, <span class="inlinecode"><span class="id" title="var">t</span></span> — термы.
Тогда следующая формула является выводимой.

<div class="paragraph"> </div>

(R) <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">s</span>/<span class="id" title="var">x</span>]</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">t</span>/<span class="id" title="var">x</span>]</span>

<div class="paragraph"> </div>

Доказательство проходит индукцией по формуле <span class="inlinecode"><span class="id" title="var">A</span></span>.

<div class="paragraph"> </div>

В качестве аксиом равенства вместо (E1)–(E5) можно формулу (R) и рефлексивность (E1).
В этом случае симметричность (E2) и транзитивность (E3) выводятся (упражнение).

<div class="paragraph"> </div>

Равенство, удовлетворяющее (E1) и (R), выражает философский принцип
неразличимости идентичностей, согласно которому все свойства равных
объектов одинаковы. Таким образом, равные объекты взаимозаменяемы в
любом контексте. Этот принцип приписывается немецкому философу
Готфриду Вильгельму Лейбницу, поэтому пропозициональное равенство
также называется лейбницевским.

<div class="paragraph"> </div>

<a name="lab3"></a><h3 class="section">Тактика <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span></h3>

<br/>
<span class="inlinecode">--------<br/>
&nbsp;<span class="id" title="var">t</span> = <span class="id" title="var">t</span>
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

<a name="lab4"></a><h3 class="section">Тактика <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span></h3>

<br/>
<span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">s</span>/<span class="id" title="var">x</span>]   <span class="id" title="var">s</span> = <span class="id" title="var">t</span><br/>
--------------<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">A</span>[<span class="id" title="var">t</span>/<span class="id" title="var">x</span>]
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

Если есть посылка или теорема <span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span></span>, то <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">&lt;-</span> <span class="inlinecode"><span class="id" title="var">E</span></span>
превращает цель <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">t</span>/<span class="id" title="var">x</span>]</span> в <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">s</span>/<span class="id" title="var">x</span>]</span> (переписывание слева направо), а
<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> превращает цель <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">s</span>/<span class="id" title="var">x</span>]</span> в <span class="inlinecode"><span class="id" title="var">A</span>[<span class="id" title="var">t</span>/<span class="id" title="var">x</span>]</span> (переписывание слева
направо). Допустимо также <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E1</span>,</span> <span class="inlinecode"><span class="id" title="var">E2</span>,</span> <span class="inlinecode"><span class="id" title="var">E3</span></span> для последовательных
переписываний. Перед <span class="inlinecode"><span class="id" title="var">E</span></span> могут стоять &lt;- или -&gt; для указания
направления переписывания. Также перед <span class="inlinecode"><span class="id" title="var">E</span></span> можно ставить !: это
означает применение <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> максимальное число раз. Это может
привести к зацикливанию для некоторых равенств, например,
<span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span>. Тактика <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> осуществляет переписывание
в посылке <span class="inlinecode"><span class="id" title="var">H</span></span> вместо доказываемой формулы под горизонтальной линией, а
<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode">*</span> переписывает E во всей цели (над и под линией).
Последние две формы — <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> и <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode">*</span> — применимы ко многим тактикам:
unfold (лекция 1), simpl (см. ниже) и т.п.

<div class="paragraph"> </div>

Утверждение <span class="inlinecode"><span class="id" title="var">E</span></span>, которое используется для переписывания, может
начинаться с кванторов всеобщности. См., например, <span class="inlinecode"><span class="id" title="var">plus_comm</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span></span>
<span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode"><span class="id" title="var">n</span>,</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span> ниже. В этом случае <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> подставляются
подходящие термы вместо универсально квантифицированных переменных,
чтобы левая часть получившегося равенства совпала с подтермом цели.
Этот процесс называется унификацией. Более точно, <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> выбирает
первое подвыражение в цели, которое унифицируется с левой частью
равенства <span class="inlinecode"><span class="id" title="var">E</span></span>, и после этого переписывает все вхождения этого
подвыражения. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">eq_refl</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">x</span> = <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">intro</span></span> не обязательно, так как <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> делает
<span class="inlinecode"><span class="id" title="tactic">intro</span></span>, пока не доберется до равенства 
</div>
<div class="code">
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">eq_symm</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">x</span> = <span class="id" title="var">y</span> → <span class="id" title="var">y</span> = <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">eq_trans</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">x</span> = <span class="id" title="var">y</span> → <span class="id" title="var">y</span> = <span class="id" title="var">z</span> → <span class="id" title="var">x</span> = <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">now</span></span> <span class="inlinecode"><span class="id" title="var">tactic</span></span> эквивалентно <span class="inlinecode"><span class="id" title="var">tactic</span>;</span> <span class="inlinecode"><span class="id" title="var">easy</span></span> где <span class="inlinecode"><span class="id" title="var">easy</span></span> — тактика,
доказывающая простые цели. Другие ранее встречавшиеся автоматические
тактики: <span class="inlinecode"><span class="id" title="tactic">trivial</span></span>, <span class="inlinecode"><span class="id" title="tactic">auto</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>, <span class="id" title="var">H2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h2 class="section">Арифметика Пеано и ее реализация в Coq</h2>


<div class="paragraph"> </div>

Арифметика Пеано — одна из систем аксиом для натуральных чисел, введенная
в XIX веке итальянским математиком Джузеппе Пеано.
См. §3.28 и ссылки в нем в следующей книге:
Пентус М.Р. Введение в математическую логику.
<a href="http://lpcs.math.msu.su/~pentus/ftp/mehmat/vmlk06le.pdf">http://lpcs.math.msu.su/~pentus/ftp/mehmat/vmlk06le.pdf</a>

<div class="paragraph"> </div>

<a name="lab6"></a><h3 class="section">Арифметики Пеано как теория первого порядка</h3>


<div class="paragraph"> </div>

Сигнатура:
<ul class="doclist">
<li> Нульместный функциональный символ <span class="inlinecode">0</span>

</li>
<li> Одноместный функциональный символ <span class="inlinecode"><span class="id" title="var">S</span></span>

</li>
<li> Двуместные функциональные символы <span class="inlinecode">+</span>, <span class="inlinecode">*</span>, записываемые в инфиксной форме

</li>
<li> Двуместный предикатный символ <span class="inlinecode">=</span>

</li>
</ul>

<div class="paragraph"> </div>

Аксиомы есть универсальные замыкания следующих формул.
<ul class="doclist">
<li> (PA1) <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">≠</span> <span class="inlinecode">0</span>

</li>
<li> (PA2) <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span>

</li>
<li> (PA3) <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span>

</li>
<li> (PA4) <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span>)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>

</li>
<li> (PA5) <span class="inlinecode">0</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>

</li>
<li> (PA6) <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span>)</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">n</span></span>

</li>
<li> (PA7) <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">0</span> <span class="inlinecode">→</span> <span class="inlinecode">(<span class="id" title="keyword">∀</span></span> <span class="inlinecode"><span class="id" title="var">n</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>))</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><span class="id" title="var">n</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> (аксиома индукции)

</li>
</ul>

<div class="paragraph"> </div>

В Coq натуральные числа в стиле Пеано представлены типом <span class="inlinecode"><span class="id" title="var">nat</span></span>.
Вместо функционального символа <span class="inlinecode">0</span> используется заглавная буква <span class="inlinecode"><span class="id" title="var">O</span></span>.
Однако можно использовать и десятичную запись:
<ul class="doclist">
<li> <span class="inlinecode">0</span> по определению есть <span class="inlinecode"><span class="id" title="var">O</span></span>

</li>
<li> <span class="inlinecode">1</span> по определению есть <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span>

</li>
<li> <span class="inlinecode">2</span> по определению есть <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">O</span>)</span>

</li>
</ul>
и т.д.

<div class="paragraph"> </div>

<a name="lab7"></a><h3 class="section">Арифметики Пеано в Coq</h3>


<div class="paragraph"> </div>

Реализацию натуральных чисел в Coq можно исследовать с помощью
команд. В отличие от тактик, которые начинаются с маленькой буквы,
команды начинаются с большой буквы. Они печатают диагностику или
меняют различные режимы работы Coq, например, количество печатаемой
информации. Команды не изменяют состояние доказательства. В CoqIDE
тактики находятся в меню Tactics, а некоторые полезные команды — в
меню Queries.

<div class="paragraph"> </div>

Так, команда <span class="inlinecode"><span class="id" title="keyword">Print</span></span> печатает информацию об идентификаторе:
его определение, тип и т.д. Она не применяется к составным выражениям. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">nat</span>.<br/>

<br/>
</div>

<div class="doc">
Вывод:

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="keyword">Inductive</span></span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Set</span></span> <span class="inlinecode">:=</span>  <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">nat</span></span>

<div class="paragraph"> </div>

Это означает, что <span class="inlinecode"><span class="id" title="var">nat</span></span> есть индуктивный тип, построенный из
конструкторов <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> и <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">nat</span></span>.

<div class="paragraph"> </div>

Команда <span class="inlinecode"><span class="id" title="keyword">Check</span></span> проверяет любое выражение на синтаксическую и
тИповую правильность. Она принимает любое выражение, не обязательно
идентификатор. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Check</span> <span class="id" title="var">S</span> (<span class="id" title="var">S</span> (<span class="id" title="var">S</span> <span class="id" title="var">O</span>)).<br/>

<br/>
</div>

<div class="doc">
Определение индуктивного типа <span class="inlinecode"><span class="id" title="var">nat</span></span> вместе с конструкторами <span class="inlinecode"><span class="id" title="var">O</span></span> и
<span class="inlinecode"><span class="id" title="var">S</span></span>, позволяющими строить натуральные числа, генерирует принцип
индукции, позволяющий доказывать утверждения для всех чисел,
построенных таким образом. В данном случае это обычный принцип
математической индукции. Аксиомы (PA1) и (PA2) выше, имеющие дело
непосредственно <span class="inlinecode"><span class="id" title="var">O</span></span> и <span class="inlinecode"><span class="id" title="var">S</span></span>, являются его следствиями.

<div class="paragraph"> </div>

Индуктивные типы очень широко используются в Coq. На самом деле,
математическим основанием Coq является исчисление индуктивных
конструкций (Calculus of Inductive Constructions, CIC), которое в свою
очередь основано на исчислении конструкций (Calculus of Constructions,
CoC: это является одной из причин выбора названия этой программы).
Не только типы данных вроде чисел, списков, деревьев и т.д., но и
логические связки, за исключением импликации и квантора всеобщности,
являются индуктивными типами. 
<div class="paragraph"> </div>

 Определения можно давать с помощью команды <span class="inlinecode"><span class="id" title="keyword">Definition</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">f</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">nat</span>) : <span class="id" title="var">nat</span> := <span class="id" title="var">x</span> + <span class="id" title="var">y</span> + <span class="id" title="var">x</span>*<span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
Из-за того, что <span class="inlinecode">+</span> по умолчанию принимает и возвращает
натуральные числа, Coq способен догадаться о типе аргументов и типе
значений функции, поэтому типы можно опустить. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">f1</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := <span class="id" title="var">x</span> + <span class="id" title="var">y</span> + <span class="id" title="var">x</span>*<span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
Сложение и умножение в Coq определяется рекурсией по первому аргументу.
Рекурсивные определения начинаются с команды <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">plus</span> (<span class="id" title="var">m</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) : <span class="id" title="var">nat</span> :=<br/>
<span class="id" title="keyword">match</span> <span class="id" title="var">m</span> <span class="id" title="keyword">with</span><br/>
| 0 ⇒ <span class="id" title="var">n</span><br/>
| <span class="id" title="var">S</span> <span class="id" title="var">m'</span> ⇒ <span class="id" title="var">S</span> (<span class="id" title="var">plus</span> <span class="id" title="var">m'</span> <span class="id" title="var">n</span>)<br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Смысл конструкции <span class="inlinecode"><span class="id" title="keyword">match</span></span> следующий: если <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, то значение
выражения есть <span class="inlinecode">0</span>. Если же <span class="inlinecode"><span class="id" title="var">m</span></span> имеет вид <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span> для некоторого <span class="inlinecode"><span class="id" title="var">m'</span></span>,
то возвращается <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">plus</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>. 
<div class="paragraph"> </div>

 Замечание: если рекурсии нет, то следует пользоваться <span class="inlinecode"><span class="id" title="keyword">Definition</span></span>,
а не <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span>. 
<div class="paragraph"> </div>

 Определим инфиксный оператор <span class="inlinecode">+</span>, обозначающий функцию <span class="inlinecode"><span class="id" title="var">plus</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Infix</span> &quot;+" := <span class="id" title="var">plus</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">nat_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Эта команда означает, что <span class="inlinecode">+</span> — левоассоциативный оператор с
приоритетом 50. В Coq приоритет операторов меняется от 0 до 100.
Операторы с меньшим значением приоритета связывают сильнее. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">times</span> (<span class="id" title="var">m</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) : <span class="id" title="var">nat</span> :=<br/>
<span class="id" title="keyword">match</span> <span class="id" title="var">m</span> <span class="id" title="keyword">with</span><br/>
| 0 ⇒ 0<br/>
| <span class="id" title="var">S</span> <span class="id" title="var">m'</span> ⇒ <span class="id" title="var">n</span> + <span class="id" title="var">times</span> <span class="id" title="var">m'</span> <span class="id" title="var">n</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;*" := <span class="id" title="var">times</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">nat_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Можно использовать Coq как калькулятор 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Compute</span> 10 + 20.<br/>
<span class="id" title="keyword">Compute</span> 2 * 3 * 4 * 5.<br/>

<br/>
</div>

<div class="doc">
Аналогичные определения даны в стандартной библиотеке, поэтому в будущем
их давать не нужно. 
<div class="paragraph"> </div>

<a name="lab8"></a><h2 class="section">Равенство по определению</h2>


<div class="paragraph"> </div>

Coq имеет два вида равенства: равенство по определению и
пропозициональное (лейбницевское) равенство. Термы, равные по
определению, считаются одним и тем же термом.

<div class="paragraph"> </div>

Определение функции <span class="inlinecode"><span class="id" title="var">plus</span></span> выше добавляет равенства (PA3) и (PA4).
Определение функции <span class="inlinecode"><span class="id" title="var">times</span></span> добавляет равенства (PA5) и (PA6).
Все эти равенства являются равенствами по определению.

<div class="paragraph"> </div>

Это позволяет заменить некоторые доказательства вычислениями. Так,
если использовать только пропозициональное равенство, то для утверждения
<span class="inlinecode">2</span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode">=</span> <span class="inlinecode">4</span>, то есть <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span>, можно
привести следующее довольно длинное доказательство с использованием
правила Modus Ponens (MP) (оно же (У-&gt;); выводит <span class="inlinecode"><span class="id" title="var">B</span></span> из <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">B</span></span> и <span class="inlinecode"><span class="id" title="var">A</span></span>).

<div class="paragraph"> </div>

<ul class="doclist">
<li> 1.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> (PA4)

</li>
<li> 2.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> (PA4)

</li>
<li> 3.  <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> (PA3)

</li>
<li> 4.  <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> (E4)

</li>
<li> 5.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> 3, 4, MP

</li>
<li> 6.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">→</span>
        <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> (E3)

</li>
<li> 7.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> 2, 5, 6, MP

</li>
<li> 8.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span> (E4)

</li>
<li> 9.  <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span> 7, 8, MP

</li>
<li> 10. <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">→</span>
        <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span> <span class="inlinecode">→</span>
        <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span> (E3)

</li>
<li> 11. <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span> 1, 9, 10, MP

</li>
</ul>

<div class="paragraph"> </div>

Если же считать обе части равенств (PA3) и (PA4) одним и тем же термом,
то <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> и <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)))</span> также будут одинаковыми термами,
и их равенство доказывается одной аксиомой (E1) (рефлексивность).

<div class="paragraph"> </div>

Различие между этими подходами описывается так называемым принципом Пуанкаре:
«Вычисление и доказательство — не одно и то же. Вычисление не требует
доказательства». Coq использует принцип Пуанкаре, и это позволяет значительно
сократить размер доказательств, а также делает возможным написание тактик,
где основная работа заключается в вычислении функций, написанных на самом
языке Coq.

<div class="paragraph"> </div>

Как бинарное отношение равенство по определению содержится в
пропозициональном равенстве. Отличие заключается в том, что равенство
по определению разрешимо, в то время как пропозициональное равенство —
нет. Поэтому Coq может автоматически проверить истинность <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0))</span> <span class="inlinecode">+</span>
<span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>, поскольку это равенство следует из (PA3) и (PA4). Однако
равенство <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">0)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> нужно доказывать, так как с точки
зрения Coq части этого равенства — разные термы. 
<div class="paragraph"> </div>

<a name="lab9"></a><h2 class="section">Доказательство арифметических фактов</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">plus_0_l</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, 0 + <span class="id" title="var">n</span> = <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
</div>

<div class="doc">
Равенство по определению 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Применение функции к аргументу связывает сильнее всего, поэтому
<span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> есть <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span>)</span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">plus_S_l</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">S</span> <span class="id" title="var">m</span> + <span class="id" title="var">n</span> = <span class="id" title="var">S</span> (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">plus_0_r</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span> + 0 = <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> не работает: это не равенство по определению.
Воспользуемся принципом математической индукции. 
</div>
<div class="code">

<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n</span> <span class="id" title="var">IH</span>].<br/>

<br/>
</div>

<div class="doc">
Так мы даем имена переменной и индукционной гипотезе в шаге индукции.
В базе индукции новые имена не появляются, поэтому слева от | ничего нет.
Можно просто сказать <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>; тогда Coq выберет свои имена. 
<div class="paragraph"> </div>

 База индукции 
</div>
<div class="code">

<br/>
* <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
</div>

<div class="doc">
В начале доказательства можно было написать

<div class="paragraph"> </div>

<span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[|</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">IH</span>];</span> <span class="inlinecode">[<span class="id" title="tactic">reflexivity</span></span> <span class="inlinecode">|]</span>.

<div class="paragraph"> </div>

Тогда база индукции будет доказана сразу и эта тактика породит только
одну цель. Следовательно, маркер списка * будет не нужен.

<div class="paragraph"> </div>

Шаг индукции. Тактика <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> переписывает слева направо
имеющиеся равенства по определению, в данном случае (PA4) 
</div>
<div class="code">

<br/>
* <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">plus_S_r</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">m</span> + <span class="id" title="var">S</span> <span class="id" title="var">n</span> = <span class="id" title="var">S</span> (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m</span> <span class="id" title="var">IH</span>].<br/>
* <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
* <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Заметим, что в предыдущем доказательстве <span class="inlinecode"><span class="id" title="var">IH</span></span> начиналась с
<span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>, поэтому <span class="inlinecode"><span class="id" title="var">IH</span></span> унифицировалась с целью для поиска терма,
который нужно подставить вместо <span class="inlinecode"><span class="id" title="var">n</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">plus_comm</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">m</span> + <span class="id" title="var">n</span> = <span class="id" title="var">n</span> + <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m</span> <span class="id" title="var">IH</span>].<br/>
* <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.  <span class="id" title="tactic">rewrite</span> <span class="id" title="var">plus_0_r</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
* <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">plus_S_r</span>, <span class="id" title="var">IH</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
При переписывании с помощью тактики <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> может оказаться, что
в цели есть несколько подвыражений, имеющих форму левой (или правой)
части равенства <span class="inlinecode"><span class="id" title="var">H</span></span>. Например, рассмотрим формулу
<br/>
<span class="inlinecode"><br/>
2 * (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>) = <span class="id" title="var">m</span> + <span class="id" title="var">n</span> + (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>)
<div class="paragraph"> </div>

</span>(напоминание: <span class="inlinecode">+</span> есть левоассоциативная операция).
В ней есть несколько подтермов, имеющих вид <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">y</span></span>:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span> (самое левое выражение, два вхождения)

</li>
<li> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span>)</span>

</li>
</ul>
Тактика <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">plus_comm</span></span> находит первое подвыражение, унифицируемое
с левой частью <span class="inlinecode"><span class="id" title="var">plus_comm</span></span>, то есть <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, и переписывает все его вхождения.
Поэтому результатом ее работы будет
<br/>
<span class="inlinecode"><br/>
2 * (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>) = <span class="id" title="var">m</span> + <span class="id" title="var">n</span> + (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>)
<div class="paragraph"> </div>

</span>Если нужно переписать только первое вхождение <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, можно
воспользоваться <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">plus_comm</span></span> <span class="inlinecode"><span class="id" title="tactic">at</span></span> <span class="inlinecode">1</span>. Для этого нужно
импортировать библиотеку <span class="inlinecode"><span class="id" title="var">Setoid</span></span> (см. ниже). Результат работы тактики есть
<br/>
<span class="inlinecode"><br/>
2 * (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>) = <span class="id" title="var">m</span> + <span class="id" title="var">n</span> + (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>)
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

Однако таким образом нельзя переписать <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> или <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span>)</span>,
потому что эти выражения не являются первым подвыражением,
унифицируемым с левой частью <span class="inlinecode"><span class="id" title="var">plus_comm</span></span>. В этом случае можно явно указать
термы, которые должны подставляться в утверждение <span class="inlinecode"><span class="id" title="var">plus_comm</span></span>. Это делается
следующим образом.
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">(<span class="id" title="var">plus_comm</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> переписывает <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> в <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">(<span class="id" title="var">plus_comm</span></span> <span class="inlinecode">(<span class="id" title="var">m</span>+<span class="id" title="var">n</span>)</span> <span class="inlinecode">(<span class="id" title="var">n</span>+<span class="id" title="var">m</span>))</span> переписывает <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span>)</span> в <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode">(<span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Setoid</span>.<br/>

<br/>
</div>

<div class="doc">
В будущем команды <span class="inlinecode"><span class="id" title="keyword">Require</span></span> нужно давать в начале файла. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">rewrite_ex</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, 2 * (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>) = <span class="id" title="var">m</span> + <span class="id" title="var">n</span> + (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>).<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">plus_comm</span>.<br/>
<span class="id" title="keyword">Undo</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">plus_comm</span> <span class="id" title="tactic">at</span> 1.<br/>
<span class="id" title="keyword">Undo</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">plus_comm</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Undo</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">plus_comm</span> (<span class="id" title="var">m</span>+<span class="id" title="var">n</span>) (<span class="id" title="var">n</span>+<span class="id" title="var">m</span>)).<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab10"></a><h1 class="section">Задание</h1>

<div class="paragraph"> </div>

 Докажите следующие теоремы. Замените <span class="inlinecode"><span class="id" title="var">Admitted</span></span> на доказательство. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">plus_assoc</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span>, (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>) + <span class="id" title="var">k</span> = <span class="id" title="var">m</span> + (<span class="id" title="var">n</span> + <span class="id" title="var">k</span>).<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">times_0_r</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span> * 0 = 0.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">times_S_r</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">m</span> * <span class="id" title="var">S</span> <span class="id" title="var">n</span> = <span class="id" title="var">m</span> + <span class="id" title="var">m</span> * <span class="id" title="var">n</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">times_comm</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">m</span> * <span class="id" title="var">n</span> = <span class="id" title="var">n</span> * <span class="id" title="var">m</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">times_assoc</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span>, (<span class="id" title="var">m</span> * <span class="id" title="var">n</span>) * <span class="id" title="var">k</span> = <span class="id" title="var">m</span> * (<span class="id" title="var">n</span> * <span class="id" title="var">k</span>).<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">times_plus_distr_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span>, <span class="id" title="var">m</span> * (<span class="id" title="var">n</span> + <span class="id" title="var">k</span>) = <span class="id" title="var">m</span> * <span class="id" title="var">n</span> + <span class="id" title="var">m</span> * <span class="id" title="var">k</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Для доказательства следующего утверждения используйте
<span class="inlinecode"><span class="id" title="var">times_plus_distr_l</span></span> и <span class="inlinecode"><span class="id" title="var">times_comm</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">times_plus_distr_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span>, (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>) * <span class="id" title="var">k</span> = <span class="id" title="var">m</span> * <span class="id" title="var">k</span> + <span class="id" title="var">n</span> * <span class="id" title="var">k</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">even</span> <span class="id" title="var">n</span> := <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, <span class="id" title="var">n</span> = 2 * <span class="id" title="var">k</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">odd</span> <span class="id" title="var">n</span> := <span class="id" title="tactic">∃</span> <span class="id" title="var">k</span>, <span class="id" title="var">n</span> = 2 * <span class="id" title="var">k</span> + 1.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">even_times</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">even</span> <span class="id" title="var">m</span> → <span class="id" title="var">even</span> (<span class="id" title="var">m</span> * <span class="id" title="var">n</span>).<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">times_1_l</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, 1 * <span class="id" title="var">m</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
Для доказательства следующего утверждения используйте
<span class="inlinecode"><span class="id" title="var">times_1_l</span></span> и <span class="inlinecode"><span class="id" title="var">times_comm</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">times_1_r</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, <span class="id" title="var">m</span> * 1 = <span class="id" title="var">m</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">odd_times</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">odd</span> <span class="id" title="var">m</span> → <span class="id" title="var">odd</span> <span class="id" title="var">n</span> → <span class="id" title="var">odd</span> (<span class="id" title="var">m</span> * <span class="id" title="var">n</span>).<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>
